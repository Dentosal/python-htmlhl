<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"><title>hl.py</title>
<style>body {background: rgb(29, 31, 33);font-size:1.2em}</style>
</head>
<body><code><span style="color:rgb(255, 255, 255);">import</span>&nbsp;<span style="color:rgb(204, 230, 201);">re</span><br><span style="color:rgb(255, 255, 255);">import</span>&nbsp;<span style="color:rgb(181, 210, 230);">sys</span><br><span style="color:rgb(255, 255, 255);">import</span>&nbsp;<span style="color:rgb(187, 158, 230);">keyword</span><br><span style="color:rgb(255, 255, 255);">import</span>&nbsp;<span style="color:rgb(244, 230, 187);">tokenize</span><br><span style="color:rgb(255, 255, 255);">import</span>&nbsp;<span style="color:rgb(224, 200, 230);">hashlib</span><br><span style="color:rgb(230, 204, 163);">TOKEN_TYPES</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(255, 255, 255);">{</span><span style="color:rgb(150, 255, 150);">getattr</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(244, 230, 187);">tokenize</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(150, 255, 150);">dir</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(244, 230, 187);">tokenize</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 203, 200);">upper</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(150, 255, 150);">isinstance</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(150, 255, 150);">getattr</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(244, 230, 187);">tokenize</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 255, 150);">int</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">}</span><br><span style="color:rgb(176, 242, 230);">BUILTIN_FUNCTIONS</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(228, 182, 230);">d</span>&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(150, 255, 150);">dir</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 200, 169);">__builtins__</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">!=</span><span style="color:rgb(181, 189, 104);">"_"</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(210, 230, 167);">islower</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">]</span><br><span style="color:rgb(230, 164, 170);">BUILTIN_EXCEPTIONS</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(228, 182, 230);">d</span>&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(150, 255, 150);">dir</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 200, 169);">__builtins__</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">!=</span><span style="color:rgb(181, 189, 104);">"_"</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(223, 230, 166);">isupper</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(255, 255, 255);">not</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(223, 230, 166);">isupper</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">]</span><br><span style="color:rgb(177, 196, 230);">BUILTIN_VARIABLES</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(228, 182, 230);">d</span>&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(150, 255, 150);">dir</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 200, 169);">__builtins__</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">==</span><span style="color:rgb(181, 189, 104);">"_"</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(150, 255, 150);">len</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(228, 182, 230);">d</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">&gt;</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span><br><span style="color:rgb(197, 162, 230);">HTML_TEMPLATE</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(181, 189, 104);">"""&lt;!DOCTYPE&nbsp;html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta&nbsp;charset="utf-8"&gt;&lt;title&gt;[title]&lt;/title&gt;
&lt;style&gt;body&nbsp;{background:&nbsp;rgb(29,&nbsp;31,&nbsp;33);font-size:1.2em}&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;&lt;code&gt;[code]&lt;/code&gt;&lt;/body&gt;
&lt;/html&gt;
"""</span><br><br><br><span style="color:rgb(255, 255, 255);">class</span>&nbsp;<span style="color:rgb(186, 230, 240);">Outputter</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(150, 255, 150);">object</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(181, 189, 104);">"""docstring&nbsp;for&nbsp;Outputter"""</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">def</span>&nbsp;<span style="color:rgb(199, 230, 247);">__init__</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 253, 203);">indentation</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(150, 100, 0);">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(181, 189, 104);">""</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 240, 193);">indentation_spaces</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(150, 100, 0);">4</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 223, 168);">whitespace</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(181, 189, 104);">"&amp;nbsp;"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(173, 218, 230);">linebreak</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(181, 189, 104);">"&lt;br&gt;"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 251, 217);">escape_function</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(230, 194, 209);">escape_html</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">def</span>&nbsp;<span style="color:rgb(172, 191, 230);">get_c</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 173, 203);">h</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(150, 255, 150);">int</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(224, 200, 230);">hashlib</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 239, 165);">sha1</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 221, 161);">hexdigest</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">16</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 222, 181);">s</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(150, 255, 150);">sum</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 255, 150);">ord</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(150, 255, 150);">hash</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(194, 198, 230);">c</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">##&nbsp;VER1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;c[h%2]&nbsp;=&nbsp;200</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;c[s%2]&nbsp;+=&nbsp;50&nbsp;+&nbsp;s&nbsp;%&nbsp;100&nbsp;+&nbsp;(h&nbsp;%&nbsp;3)*50</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;return&nbsp;[min(q,&nbsp;220)&nbsp;for&nbsp;q&nbsp;in&nbsp;c]</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">##&nbsp;VER2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;c[h%3]&nbsp;=&nbsp;255</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;if&nbsp;c[2]:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c[1]&nbsp;+=&nbsp;100</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;if&nbsp;h%7&lt;3:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c[(s%3+bool(c[s%3])&gt;100)%3]&nbsp;=&nbsp;255</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(150, 255, 150);">range</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(150, 100, 0);">3</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(194, 198, 230);">c</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">]</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(150, 255, 150);">int</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(150, 100, 0);">155</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 173, 203);">h</span><span style="color:rgb(255, 255, 255);">%</span><span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">*</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(150, 100, 0);">100.0</span><span style="color:rgb(255, 255, 255);">/</span><span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 173, 203);">h</span><span style="color:rgb(255, 255, 255);">/=</span><span style="color:rgb(150, 100, 0);">255</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(194, 198, 230);">c</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(230, 222, 181);">s</span><span style="color:rgb(255, 255, 255);">%</span><span style="color:rgb(150, 100, 0);">3</span><span style="color:rgb(255, 255, 255);">]</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(150, 100, 0);">230</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">return</span>&nbsp;<span style="color:rgb(194, 198, 230);">c</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">def</span>&nbsp;<span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(230, 203, 193);">color</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(227, 230, 238);">size</span><span style="color:rgb(255, 255, 255);">=</span><span style="color:rgb(255, 150, 150);">None</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 245, 230);">raw_css</span><span style="color:rgb(255, 255, 255);">=</span><span style="color:rgb(255, 150, 150);">None</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 202, 227);">css</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(181, 189, 104);">"color:rgb("</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(181, 189, 104);">",&nbsp;"</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(248, 163, 230);">join</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 255, 150);">str</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(230, 203, 193);">color</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(181, 189, 104);">");"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(227, 230, 238);">size</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 202, 227);">css</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(181, 189, 104);">"font-size:"</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(150, 255, 150);">str</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(227, 230, 238);">size</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(181, 189, 104);">"em;"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(181, 245, 230);">raw_css</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 202, 227);">css</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(181, 245, 230);">raw_css</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">return</span>&nbsp;<span style="color:rgb(181, 189, 104);">"&lt;span&nbsp;style=\"{}\"&gt;{}&lt;/span&gt;"</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(150, 255, 150);">format</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 202, 227);">css</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 251, 217);">escape_function</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">def</span>&nbsp;<span style="color:rgb(150, 255, 150);">input</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(228, 230, 228);">ttype</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(188, 230, 171);">start</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(230, 188, 168);">end</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(230, 246, 250);">line</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(230, 204, 163);">TOKEN_TYPES</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(228, 230, 228);">ttype</span><span style="color:rgb(255, 255, 255);">]</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 217, 170);">endswith</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(173, 218, 230);">linebreak</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">not</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(181, 189, 104);">"INDENT"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"DETENT"</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 253, 203);">indentation</span><span style="color:rgb(255, 255, 255);">*</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 240, 193);">indentation_spaces</span><span style="color:rgb(255, 255, 255);">*</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 223, 168);">whitespace</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"COMMENT"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">160</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">160</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">160</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"STRING"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(150, 100, 0);">181</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">189</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">104</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"NAME"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(187, 158, 230);">keyword</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(221, 207, 230);">iskeyword</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">or</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(181, 189, 104);">"self"</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(176, 242, 230);">BUILTIN_FUNCTIONS</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(230, 164, 170);">BUILTIN_EXCEPTIONS</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(191, 230, 178);">text</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(177, 196, 230);">BUILTIN_VARIABLES</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">else</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(172, 191, 230);">get_c</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"OP"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">255</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"NUMBER"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(234, 230, 218);">gen_t</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">150</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">100</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(181, 189, 104);">"NEWLINE"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"NL"</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(173, 218, 230);">linebreak</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"ENDMARKER"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;self.html&nbsp;+=&nbsp;"&lt;hr&gt;"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">pass</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"INDENT"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 253, 203);">indentation</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(150, 100, 0);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">elif</span>&nbsp;<span style="color:rgb(235, 201, 230);">tt</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"DEDENT"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 253, 203);">indentation</span>&nbsp;<span style="color:rgb(255, 255, 255);">-=</span>&nbsp;<span style="color:rgb(150, 100, 0);">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(255, 255, 255);">:</span><span style="color:rgb(255, 255, 255);">-</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 240, 193);">indentation_spaces</span><span style="color:rgb(255, 255, 255);">*</span><span style="color:rgb(150, 255, 150);">len</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 223, 168);">whitespace</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">]</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">else</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">raise</span>&nbsp;<span style="color:rgb(255, 150, 150);">ValueError</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"Invalid&nbsp;token:&nbsp;{}&nbsp;{}"</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(150, 255, 150);">format</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(235, 201, 230);">tt</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(150, 255, 150);">repr</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(191, 230, 178);">text</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(230, 188, 168);">end</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span>&nbsp;<span style="color:rgb(255, 255, 255);">&lt;</span>&nbsp;<span style="color:rgb(150, 255, 150);">len</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 246, 250);">line</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">and</span>&nbsp;<span style="color:rgb(230, 246, 250);">line</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(230, 188, 168);">end</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">]</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">"&nbsp;"</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">+=</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 223, 168);">whitespace</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(160, 160, 160);">#&nbsp;fix&nbsp;dedent&nbsp;whitespace&nbsp;(FIXME:&nbsp;dentented&nbsp;comments)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(204, 230, 201);">re</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(238, 230, 166);">sub</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">r"("</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(204, 230, 201);">re</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(176, 219, 230);">escape</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(230, 223, 168);">whitespace</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(181, 189, 104);">r")+?"</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(204, 230, 201);">re</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(176, 219, 230);">escape</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(173, 218, 230);">linebreak</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(173, 218, 230);">linebreak</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">self</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span><span style="color:rgb(255, 255, 255);">)</span><br><br><span style="color:rgb(255, 255, 255);">def</span>&nbsp;<span style="color:rgb(230, 194, 209);">escape_html</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(211, 230, 172);">html</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">for</span>&nbsp;<span style="color:rgb(209, 230, 238);">q</span>&nbsp;<span style="color:rgb(255, 255, 255);">in</span>&nbsp;<span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"&amp;"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"amp"</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"&lt;"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"lt"</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"&gt;"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"gt"</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"&nbsp;"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"nbsp"</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(211, 230, 172);">html</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(211, 230, 172);">html</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(179, 177, 230);">replace</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">0</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"&amp;"</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(209, 230, 238);">q</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(181, 189, 104);">";"</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">return</span>&nbsp;<span style="color:rgb(211, 230, 172);">html</span><br><br><span style="color:rgb(255, 255, 255);">def</span>&nbsp;<span style="color:rgb(230, 180, 180);">make_html</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(162, 230, 167);">f</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(205, 176, 230);">title</span><span style="color:rgb(255, 255, 255);">=</span><span style="color:rgb(181, 189, 104);">"Untitled"</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(176, 230, 161);">out</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(186, 230, 240);">Outputter</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(244, 230, 187);">tokenize</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(244, 230, 187);">tokenize</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(162, 230, 167);">f</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(212, 235, 230);">readline</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(176, 230, 161);">out</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(150, 255, 150);">input</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">return</span>&nbsp;<span style="color:rgb(197, 162, 230);">HTML_TEMPLATE</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(179, 177, 230);">replace</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"[title]"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(230, 194, 209);">escape_html</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(205, 176, 230);">title</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">)</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(179, 177, 230);">replace</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"[code]"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(176, 230, 161);">out</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(211, 230, 172);">html</span><span style="color:rgb(255, 255, 255);">)</span><br><br><br><span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(150, 150, 255);">__name__</span>&nbsp;<span style="color:rgb(255, 255, 255);">==</span>&nbsp;<span style="color:rgb(181, 189, 104);">'__main__'</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">if</span>&nbsp;<span style="color:rgb(150, 255, 150);">len</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 210, 230);">sys</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(239, 230, 217);">argv</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">!=</span>&nbsp;<span style="color:rgb(150, 100, 0);">2</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(150, 255, 150);">exit</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 189, 104);">"Usage:&nbsp;python&nbsp;hl.py&nbsp;&lt;file-to-hl&gt;"</span><span style="color:rgb(255, 255, 255);">)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">with</span>&nbsp;<span style="color:rgb(150, 255, 150);">open</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 210, 230);">sys</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(239, 230, 217);">argv</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">as</span>&nbsp;<span style="color:rgb(230, 206, 183);">fo</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(240, 230, 205);">result</span>&nbsp;<span style="color:rgb(255, 255, 255);">=</span>&nbsp;<span style="color:rgb(230, 180, 180);">make_html</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(230, 206, 183);">fo</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 210, 230);">sys</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(239, 230, 217);">argv</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">)</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(255, 255, 255);">with</span>&nbsp;<span style="color:rgb(150, 255, 150);">open</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(181, 210, 230);">sys</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(239, 230, 217);">argv</span><span style="color:rgb(255, 255, 255);">[</span><span style="color:rgb(150, 100, 0);">1</span><span style="color:rgb(255, 255, 255);">]</span><span style="color:rgb(255, 255, 255);">+</span><span style="color:rgb(181, 189, 104);">".html"</span><span style="color:rgb(255, 255, 255);">,</span>&nbsp;<span style="color:rgb(181, 189, 104);">"w"</span><span style="color:rgb(255, 255, 255);">)</span>&nbsp;<span style="color:rgb(255, 255, 255);">as</span>&nbsp;<span style="color:rgb(230, 206, 183);">fo</span><span style="color:rgb(255, 255, 255);">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:rgb(230, 206, 183);">fo</span><span style="color:rgb(255, 255, 255);">.</span><span style="color:rgb(238, 219, 230);">write</span><span style="color:rgb(255, 255, 255);">(</span><span style="color:rgb(240, 230, 205);">result</span><span style="color:rgb(255, 255, 255);">)</span><br></code></body>
</html>
